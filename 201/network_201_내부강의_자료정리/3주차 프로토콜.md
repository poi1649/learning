
#### 네트워크 계층 구조
항공 시스템을 누군가 설명해달라고 한다면 우리는
티켓 구입 -> 수하물 접수 -> 탑승 -> 활주로 이륙 -> 비행기 라우팅 -> 활주로 착륙 -> 하차 -> 수하물 회수 -> 티켓 카운터에 항의
순으로 설명할 수 있다.
이처럼 크고 복잡한 구조를 설명할 때 우리는 계층형의 구조를 활용해 단계별로 쉽게 설명할 수 있다.
또, 만약 탑승 수속이 바뀌더라도 나머지 계층은 그대로 유지할 수 있듯 시스템에 유연성을 제공해주기도 한다.

프로토콜 마찬가지다. 크고 복잡한 구조를 계층으로 조직하여 시스템 구성요소를 단순화하고, 각 계층이 다른 계층의 변화의 영향을 받지 않게 한다.

프로토콜에서도 각 계층이 담당하는 역할이 있다. 이를 위해 한 계층이 자신만의 내부 동작을 수행하고, 하위 계층의 서비스를 사용하기도 한다.

예를 들어 n 계층에서 신뢰성 있는 전송 기능을 담당한다고 하면, 이는 n -1 계층 계층의 비 신뢰적인 전송 서비스를 사용하고, n 계층에서 메시지의 손실감지와 재전송 기능을 수행할 수 있다.

인터넷의 프로토콜의 계층은 5개 계층으로 구분된다. 물리, 링크, 네트워크, 트랜스포트, 애플리케이션이 이 계층이다.

#### 애플리케이션 계층
애플리케이션 계층의 프로토콜은 여러 종단 시스템에 분산되어 있어 다른 종단 시스템과 일정한 규칙으로 통신할 수 있도록 도와준다. 이렇게 통신할 때 교환하는 패킷을 애플리케이션 계층에서는 메시지라고 부른다.

#### 트랜스포트 계층
클라이언트와 서버간의 애플리케이션 계층의 메시지를 전송하는 서비스를 제공하는 계층이다.
인터넷에는 TCP와 UDP 라는 두 개의 주요한 트랜스포트 계층 프로토콜이 존재한다.
이 계층에서 쓰이는 패킷을 세그먼트라고 한다.

#### 네트워크 계층
네트워크 계층은 트랜스포트 계층에서 받은 세그먼트를 한 호스트에서 다른 호스트로 라우팅하는 책임을 진다.
트랜스포트 계층에서 호스트 주소가 적힌 세그먼트를 받으면 네트워크 계층은 이를 IP 데이터그램 필드를 정의하는 데이터그램으로 만들며, 이 경로를 라우팅 프로토콜을 통해 결정한다.

#### 링크 계층
네트워크 계층에서 정해준 길을 따라 다음 노드에 데이터그램을 전달하는 역할을 한다.
이 계층에는 이더넷 ,와이파이 등의 프로토콜이 있다.
링크 계층에서 사용하는 패킷을 프레임이라고 한다.

#### 물리 계층
링크 계층의 전송을 비트단위로 구체화하는 계층이다.  이더넷 링크 프로토콜에서는 꼬임상선, 동축케이블 등의 프로토콜이 존재한다.

#### 캡슐화
각 계층들은 하위 계층에게 자신이 필요한 정보를 담아 보내며, 하위 계층은 또 자신이 필요한 정보를 담아 더 하위 계층에 전달한다.
이 때, 일반적으로 상위 계층에서 전달 받은 정보를 페이로드, 하위 계층에서 추가하는 정보를 헤더라고 한다.

#### 네트워크 애플리케이션
전자메일, www, 검색엔진, 커머스 같은 것들을 네트워크 애플리케이션이라고 한다.
이들은 종단 시스템에서 동작하고, 네트워크를 통해 서로 통신한다.

우리는 애플리케이션을 만들 때, 이 네트워크 애플리케이션을 만들고, 라우터에서 동작하는 소프트웨어는 따로 만들지 않는다.

이렇게 종단 시스템에서만 복잡성이 늘어나는 구조가 애플리케이션들이 빠르게 발전하는 원동력이 되었다.
