
#### 전송 계층 개요

전송 계층은 호스트에서 실행되고 있는 두 프로세스간의 논리적인 연결을 제공한다.
여기서 논리적인 연결이란, 실제로 연결은 라우터를 타고 위치를 찾고, mac 주소를 찾고 하는 과정을 추상화하여 프로세스만이 참여하고 있는 것 처럼 연결을 제공한다는 뜻이다.

Ann이라는 사람의 집에 12명의 아이들이 살고 있다고 생각해보자.
이 아이들이 Bill의 집에 있는 아이들로부터 편지를 받으려면 먼저 집에 편지가 도착해야 하고, 도착한 편지를 Ann이 뜯어서 어떤 아이들에게 온 것인지 식별해 전달해주어야 한다.

이 때 Ann과 Bill의 집은 호스트, 종단 시스템이라고 할 수 있고 집에 살고 있는 아이들은 프로세스라고 할 수 있다.
마찬가지로 프로세스가 보내는 메시지를 아이들이 보내는 편지처럼 생각할 수 있고, 전송 계층의 역할을 Ann과 Bill이 하고 있다.

여기서 중요한 것은 Ann과 Bill 은 집 밖으로 나가지 않고 집 안에서 일을 한다는 점이다.

마찬가지로 전송계층 또한 한 호스트 안에서 일어나는 일을 담당한다.

집과 집 사이에 편지를 전달하는 일은 우편 서비스가 해주는 것 처럼, 호스트간 실제 패킷 전달은 네트워크 계층의 프로토콜이 담당한다.

#### 송신자, 수신자의 액션

먼저 송신자는 어플리케이션 메시지를 만들어 전송 계층으로 내려보낸다.
이 때 소켓이라는 인터페이스를 이용한다.
소켓은 파일로 추상화되어 있다. 여느 장치 파일들처럼 파일 디스크립터가 실제 물리적인 파일을 가리키는 것이 아니라 운영체제의 커널에 있는 네트워크 스택 또는 이를 위한 버퍼를 가리키고 있다고 할 수 있다.

이렇게 전달된 데이터는 전송 계층에서 필요한 헤더가 추가된 세그먼트 형태로 바뀐 후 IP 계층으로 전달된다. 
IP계층에서는 이를 한번 더 포장에 패킷으로 만들어 링크 계층으로 밀어낸다.

이후 수신자의 전송 계층이 네트워크 계층으로부터 세그먼트를 받게되면 이 헤더에 있는 정보를 보고 데이터가 올바른지, 어떤 프로세스로 가야할 지 결정한다.

이후 전송계층의 헤더를 제거하고 메시지를 추출해 적절한 어플리케이션에 메시지를 올려보내주는데 이를 demultiplexing 이라고 한다.

#### TCP, UDP 간략한 설명
TCP 는 Transmission Control Protocol의 준말로 연결 지향형 프로토콜이다.
데이터의 신뢰성과 순서를 보장하며, 혼잡제어, 흐름제어 등을 제공한다.
UDP 는 User Datagram Protocol의 준말로 비연결형 프로토콜이다.
TCP 의 기능을 하나도 제공하지 않는다.




