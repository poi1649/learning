

플로우 네트워크는 그래프 $G = (V, E)$ 안의 간선 $(u, v) \in E$ 들이 모두 음이아닌 용량 $c(u,v) ≥ 0$ 을 갖는 방향 그래프이다.

플로우 네트워크는 간선 $**(u,v)**$ 가 존재하면 반대 방향의 간선 $(v,u)$ 가 존재하는 것을 허용하지 않는다.

### 플로우

플로우는 플로우 네트워크 $G = (V, E)$ 에 대해 다음과 같은 조건을 만족하는 **실수(real number) 함수** 이다.

1. 모든 $u,v \in V$ 에 대해 $0≤ f(u,v) ≤ c(u,v)$ 다.
    
    (모든 간선은 0 이상, 용량 이하의 플로우 값을 갖는다)
    
2. 모든 $u \in V - \{s, t\}$ 에 대해 다음을 요구한다.
    
    (s 는 출발 정점, t는 도착 정점이므로 제외)
    

$$ \sum_{v \in V} f(v,u) = \sum_{v \in V} f(u,v) $$

(어떤 정점 $v$에서 $u$로 향하는 플로우 값과 $u$에서 $v$로 들어오는 플로우 값은 동일하다, 두 정점을 잇는 간선이 없을 경우 서로 플로우가 존재할 수 없으며 그 값은 0이다)

1. 음이 아닌 용량 $f(u,v)$ 를 정점 $u$에서 정점 $v$까지의 플로우라고 한다.
    
2. 플로우 $f$의 값 $|f|$ 는 다음과 같이 정의한다.
    
    $|f| = \sum_{v \in V} f(s,v) - \sum_{v \in V} f(v,s)$
    
    (출발점에서 나오는 전체 플로우 값 - 출발점으로 들어가는 플로우 값, 일반적인 플로우 네트워크에서는 어떤 간선도 출발점으로 들어가지 않는다.)
    

### 잔여 네트워크

잔여 네트워크는 주어진 플로우 네트워크와 플로우에 대해 추가적으로 허용되는 플로우의 양을 표시하기 위한 그래프이다.

잔여 네트워크 $G_f$ 는 다음과 같이 정의한다.

1. 잔여 네트워크에는 다음과 같은 간선이 포함된다. (밑에서 $E$는 원본 플로우 네트워크의 간선 집합이다.)

$$ c_f(u, v)= \begin{cases} c(u,v) - f (u,v) & {if} \ (u,v) \in E \\ f(v,u) & {if } (v,u) \in E \\ 0 &{else} \end{cases} $$

1. 잔여 네트워크의 간선의 수는 다음과 같은 조건을 만족한다. $E_f ≤ 2|E|$ 이다.

> 잔여 네트워크의 간선은 플로우 네트워크에 존재하는 간선이거나, 그 반대방향의 간선이기 때문이다. 이러한 특성으로 플로우 네트워크의 간선 $(u,v)$와 $(v,u)$를 둘다 포함할 수 있기 때문에 역방향 간선을 허용하지 않는 플로우 네트워크의 규칙을 만족하지 못한다. 즉, 엄밀히 플로우 네트워크라고 말할수는 없다.

1. $|f\uparrow f|$ = $|f| + |f'|$ 을 만족한다.

## 구현팁

→ 원래 플로우 네트워크의 일반성을 지키기 위해 한 방향만 고려해야하지만, 구현에서는 그래프가 무방향일 경우 양 방향에 전부 같은 용량을 주어도 문제없다. (특수한 경우가 아니라면)

→ flow와 cap을 전부 배열로 저장하는데 메모리 초과가 발생한다면 Edge를 Struct로 구성해 역간선을 참조하게 하는 방식으로 구현할 수 있다.