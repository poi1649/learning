
- 페이지 압축에 대해 설명해주세요
    - 페이지를 압축하는 기능이다. 압축 기법으로 펀치홀이 있다. 펀치홀은 16kb를 압축해서 7kb가 써진다. 읽을 때는 16kb를 읽어들이게 된다.
- 왜 펀치홀을 사용하죠?
    - 데이터 베이스의 읽기 쓰기 단위가 페이지 단위인데 실제로 읽을 때 페이지 단위가 아니면 성능에 이슈가 있다. 나머지 공간은 os에게 반환되는데 해당 부분은 os가 자유롭게 사용한다.
- 페이지 압축이 잘 안 쓰이는 이유
    - 펀치홀이 운영체제, 하드웨어에 종속적인 경우가 있다. 해당 커맨드가 제대로 지원되지 않는 경우가 많다. → 파일 시스템 커맨드에서 cp 같은 것이 펀치홀에서 사용되는 다른 프로그램 디스크도 한꺼번에 다루는 경우가 있다.
- 테이블 압축에 실패한다는 것이 무슨 뜻일까요?
    - 테이블 압축할 때 압축의 단위를 항상 지정한다. 그 압축을 하고나서 압축된 파일의 크기가 이 지정된 사이즈보다 크면 이 파일을 두 개로 쪼개서 저장한다. 이렇게 파일이 쪼개질 때 압축이 실패했다고 한다.
- 압축 실패가 빈번하게 발생하면 어떤 일이 일어날까?
    - 반복적으로 압축 진행하면서 cpu 사용량이 늘어날 수 밖에 없다.
- 실패율이 높아도 압축을 고려해야 할 때는 뭘까?
    - 데이터 수정이 잘 일어나지 않으면 고려해볼 수 있다.(에밀)
    - 인서트만 자주 일어나면 고려하기 좋다(답)?
- 디스크에서 데이터 파일이 크면 어떤 문제가 발생할 수 있을까? + 압축을 하면서 발생하는 문제가 있는데, 그럼에도 압축을 하는 이유가 뭘까??
    - (포이) 일단 하드웨어 용량의 문제가 있다. 여기서 발생하는 문제는 다른 곳에 파일을 백업할 때 문제가 발생할 수 있다.
    - (에밀) 더티페이지가 많이 발생하며 쓰기 작업이 느려질 수 있다. 데이터 페이지가 많아지면서 데이터를 로드하는 데도 많은 코스트가 발생한다.
- 압축을 했을 때 어떤 단점이 있을까??
    - 압축/압축 해제 과정에서 CPU 사용량이 늘어난다.
    - 버퍼 풀의 LRU 리스트가 압축된, 압축 해제된 데이터 페이지를 모두 관리하기 때문에 메모리 측면에서도 관리 비용이 이중으로 생긴다.
- 압축/압축 해제된 데이터 페이지를 모두 버퍼 풀에서 관리하는 이유가 뭘까?
    - 압축 해제된 페이지만 가지고 있다면 용량으로 인한 메모리 부하가 생긴다.
    - 압축된 페이지만 가지고 있다면 압축 과정에서 CPU 부하가 생긴다.
- 암호화는 어떤 레이어에서 발생할까요?
    - 암호화도 IO Layer에서 일어난다. 반대로 압축은 IO Layer 상단에서 일어난다.
- 압축을 암호화보다 먼저하는 이유는?
    - 암호화를 먼저하면 압축을 하기가 어렵다. 패턴이 없으니까
    - 암호화를 먼저하게 되면 압축 해제하고 복호화를 하게 되는데 결국 압축된 파일을 볼 수 없다.
- 2 단계 암호화를 하는 이유
    - 암호 키가 마스터 키와 데이터스페이스 키가 있다. 마스터키는 외부에서도 존재한다. 데이터 스페이스키는 내부적으로만 존재한다. 마스터키는 일정 주기마다 변경되어야 한다. 암호화 복호화가 많이 일어난다.
    - 기본적으로 대칭키를 사용한다 → 하나를 빼앗기면 마음대로 복호화 가능하다. 마스터 키로 테이블 스페이스 키를 암호화 복호화 하게 된다. 그래서 테이블 스페이스키는 안 바뀌어도 된다. 그래서 암호의 변경이 일어나지 않는다. 그래서 굿.
- 복호화 지연이 발생할텐데 왜 암호화를 사용할까?
    - 버퍼풀에서 가면 복호화지연 x
    - 백그라운드 스레드가 쓰기 담당할 때 복호화지연 x
- 키링 백업해야하는 이유?
    - 유실됐을 떄 문제 발생
    - 로그가 암호화된 상태로 저장되는데 과거의 로그로 복원을 할텐데 그 당시의 키로 암호화가 되어 있기 때문에 키가 바뀌면 그 키도 같이 백업을 해야한다.