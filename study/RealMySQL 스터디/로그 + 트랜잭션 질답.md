
- - 슬로우 쿼리 로그란?
        - 특정 수행 시간이 우리가 지정한 수행 시간보다 길게 측정된 쿼리들에 대한 정보를 제공한다.
    - 슬로우 쿼리는 어디에 기록되나요?
        - 파일 또는 테이블에 기록할 수 있다.
    - 언제 파일에 기록하고 언제 테이블에 기록?
        - 설정에 따라 선택할 수 있다. 기본은 파일로 알고 있다.
    - 각각의 기록 방법에 대한 장단점?
        - DB에 기록하는 것
            - 장점1. 쿼리를 통해 질의 가능하다. 원하는 목적에 따라 의미 있는 데이터를 뽑아낼 수 있다. + 관계형 DB의 장점
            - 단점1. DB 서버가 다운 되면 해당 데이터에 접근할 수 없다.
        - 파일에 기록하는 것
            - 장점1. DB 서버와는 별개로 관리할 수 있다.
            - 장점2. 데이터 전송이 쉽다.
        - DB에 기록해도 기본적으로 CSV 파일로 저장되기 때문에 DB 기록의 단점1번은 해당되지 않는다.
        - DB에 부하가 생긴다는 단점이 존재하고, 그 외에는 모르겠다.
    - 키캐시란?
        - 데이터의 인덱스를 캐싱하기 위해 사용한다.
    - MyISAM은 키만 캐싱을 하나요?
        - 키만 캐싱을 합니다. 실제 데이터는 전부 디스크에서 가져옵니다.(운영체제단의 캐싱을 제외하면)
    - 테이블 구조 변경은 코스트가 큰데 해당 코스트를 줄이기 위해 무슨 락을 사용할까?
        - 메타데이터 락을 걸면 데이터의 삽입 삭제는 자유롭지만 칼럼의 변경을 할 수 없다.
    - DDL을 사용할 때 문제점
        - 테이블 이름 변경한다면 잠깐은 없는 테이블로 인식할 수 있다.
        - DDL은 단일 스레드로 작동하기 때문에 많은 시간을 쓴다. 그래서 멀티스레드를 사용하게 된다.
    - 잠금과 트랜잭션에 대해서 설명해 주세요.
        - 트랜잭션은 여러 작업을 작업 단위로 묶어 COMMIT/ROLLBACK을 통해 정합성을 보장한다. 잠금은 동시적으로 하나의 자원에 접근할 때 동시성 제어를 하기 위해 사용한다.
    - 잠금의 레벨 중, InnoDB의 기본 잠금 레벨은?
        - DDL을 실행할 때는 테이블 락
        - 셀렉트를 할 때는 SERIALIZABLE - 테이블 락
        - 레코드 수정에 대해서는 레코드 락
    - InnoDB의 REPEATABLE READ에서 팬텀 리드가 발생하지 않는 이유는?
        - (에밀) 못 적었네요
        - (포이) 레코드 락을 걸 때 갭 락과 넥스트 키 락이 걸린다. 레코드 락을 걸면서 갭 락과 넥스트 키 락을 함께 걸기 때문에 조회하는 범위에 한해서는 데이터 수정이 일어나지 않는다.
    - InnoDB와 MyISAM의 인덱스와 데이터 파일 구조 차이
        - MyISAM은 pk로 클러스터링을 하지 않는다. (직접 데이터에 대한 참조를 가짐)
        - InnoDB는 인덱스로 클러스터링이 되어 있음, 즉 인덱스로 정렬이 이루어져 있음
        - MyISAM은 클러스트링이 없어 힙 데이터 구조처럼 계속해서 순서에 의해 데이터가 축척됨
    - InnoDB의 자동 증가 락이란?
        - 연속적인 자동 증가락. 대량 Insert가 일어났을 때 예측할 수 있으면 연속적인 범위에 대해서 래치로 락을 건다. 한 쿼리안에서 연속적인 값을 보장한다.
        - 인터리빙 락. 연속적인 값을 보장 X, 래치만을 사용하기 때문에 연속적인 값을 보장하지 못한다.
        - 인터리빙 락은 바이너리 로그를 statement 형식으로 저장하게 되면 레플리카 서버에서 id 값의 불일치가 발생할 수 있다.
    - 자동 증가락이 어디에 사용되는지?
        - Insert와 Replace
    - 자동 증가 락의 lock_mode 0번은 어떤 모드일까요?
        - 인서트 문을 실행하기 전부터 후까지 자동 증가 락에 대해서 점유권을 가지고 있다. 0번 방식이 더 안전하고 보수적인 방식이라고 알고 있다.
    - 백업 락 vs 글로벌 락
        - 글로벌 락: DB 서버 전체에 대해 SELECT를 제외하고 걸리는 락. 주로 레플리카 서버로 DB를 복제할 때 사용하게 된다. 복제 중, DDL이 실행되면 중단된다.
        - 백업 락: 특정 행위에 대해서는 DDL이 실행되어도 지장이 없도록? 복제 중에\
    
    [](https://www.notion.so/MySQL-9586f8fd89144a398c1ff9a6e99e103d?pvs=21)[https://cubic-statistic-130.notion.site/MySQL-9586f8fd89144a398c1ff9a6e99e103d?pvs=4](https://cubic-statistic-130.notion.site/MySQL-9586f8fd89144a398c1ff9a6e99e103d?pvs=4)
    
    [https://dev.mysql.com/doc/refman/8.0/en/innodb-next-key-locking.html](https://dev.mysql.com/doc/refman/8.0/en/innodb-next-key-locking.html)