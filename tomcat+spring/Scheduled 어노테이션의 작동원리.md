
Bean을 띄우는 과정에서 Scheduled 어노테이션이 붙은 작업들은 내부적으로 자바의 DelayQueue 라는 곳에 전달된다.

DelayQueue는 우선순위 큐의 일종으로 실행까지 남은 delay를 기준으로 각 작업들을 정렬한다.
이렇게 작업이 들어오면 Queue는 큐의 최상단 작업(제일 적은 delay가 남은 작업)의 delay를 확인하여 이 숫자만큼의 timeout을 두고 wait()을 시작한다.

지정된 시간이 끝나거나 지연이 더 짧은 작업이 Queue에 추가되면 이 스레드는 깨어난다.
깨어났을 때 Queue의 최상단에 있는 작업이 0이나 음수의 delay를 가진다면 이 작업을 새로운 쓰레드를 할당해 실행한다.

이 때, 쓰레드는 적절한 방식으로 주입된 TaskPoolScheduler에 구현체의해 실행되기 때문에 매번 생성되지 않고, 쓰레드 풀에서 할당되는 것이 일반적인 작동 방식이다.

위 과정이 사용자가 지정한 cron, dealy를 기준으로 반복된다.
(cron 일 경우 시작 시점으로부터 적절한 시간을 추가한 delay를 가진 작업이 queue에 추가됨, delay일 경우 작업 완료 시점으로부터 계산하여 추가)


